<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VPLAY - Stock Videos</title>
    <link href="/css/board/content_list.css" rel="stylesheet">
    <link href="/css/topbar.css" rel="stylesheet" type="text/css">
    <script src="https://unpkg.com/wavesurfer.js"></script>
    <style>
    	.hidden {
			display: none;
		}
		
		.flexdirection{
			position: absolute;
			left: 2rem;
		}
    </style>
</head>
<body>
	<div th:replace="~{views/common/topbar :: topbar}"></div>
	
    <div class="main-content">
    <div class="categorywrap">
            	<div id="CategoriesViewButton" style="display: inline-block; align-items: center; gap: 8px;cursor: pointer;">
        		<svg width="42" height="33" viewBox="0 0 42 33" fill="none" xmlns="http://www.w3.org/2000/svg">
				<g filter="url(#filter0_d_224_3143)">
				<path fill-rule="evenodd" clip-rule="evenodd" d="M5.04163 4.16667C5.04163 3.59137 5.508 3.125 6.08329 3.125H35.25C35.8253 3.125 36.2916 3.59137 36.2916 4.16667C36.2916 4.74196 35.8253 5.20833 35.25 5.20833H6.08329C5.508 5.20833 5.04163 4.74196 5.04163 4.16667Z" fill="white"/>
				<path d="M12.3333 4.16667C12.3333 6.46785 10.4679 8.33333 8.16667 8.33333C5.86548 8.33333 4 6.46785 4 4.16667C4 1.86548 5.86548 0 8.16667 0C10.4679 0 12.3333 1.86548 12.3333 4.16667Z" fill="#191820"/>
				<path fill-rule="evenodd" clip-rule="evenodd" d="M8.16667 6.25C9.31726 6.25 10.25 5.31726 10.25 4.16667C10.25 3.01607 9.31726 2.08333 8.16667 2.08333C7.01607 2.08333 6.08333 3.01607 6.08333 4.16667C6.08333 5.31726 7.01607 6.25 8.16667 6.25ZM8.16667 8.33333C10.4679 8.33333 12.3333 6.46785 12.3333 4.16667C12.3333 1.86548 10.4679 0 8.16667 0C5.86548 0 4 1.86548 4 4.16667C4 6.46785 5.86548 8.33333 8.16667 8.33333Z" fill="white"/>
				<path fill-rule="evenodd" clip-rule="evenodd" d="M5.04211 12.4987C5.04211 11.9234 5.50848 11.457 6.08378 11.457H35.2504C35.8257 11.457 36.2921 11.9234 36.2921 12.4987C36.2921 13.074 35.8257 13.5404 35.2504 13.5404H6.08378C5.50848 13.5404 5.04211 13.074 5.04211 12.4987Z" fill="white"/>
				<path d="M24.8338 12.4987C24.8338 14.7999 22.9683 16.6654 20.6672 16.6654C18.366 16.6654 16.5005 14.7999 16.5005 12.4987C16.5005 10.1975 18.366 8.33203 20.6672 8.33203C22.9683 8.33203 24.8338 10.1975 24.8338 12.4987Z" fill="#191820"/>
				<path fill-rule="evenodd" clip-rule="evenodd" d="M20.6672 14.582C21.8177 14.582 22.7505 13.6493 22.7505 12.4987C22.7505 11.3481 21.8177 10.4154 20.6672 10.4154C19.5166 10.4154 18.5838 11.3481 18.5838 12.4987C18.5838 13.6493 19.5166 14.582 20.6672 14.582ZM20.6672 16.6654C22.9683 16.6654 24.8338 14.7999 24.8338 12.4987C24.8338 10.1975 22.9683 8.33203 20.6672 8.33203C18.366 8.33203 16.5005 10.1975 16.5005 12.4987C16.5005 14.7999 18.366 16.6654 20.6672 16.6654Z" fill="white"/>
				<path fill-rule="evenodd" clip-rule="evenodd" d="M5.04138 20.8346C5.04138 20.2593 5.50775 19.793 6.08305 19.793H35.2497C35.825 19.793 36.2914 20.2593 36.2914 20.8346C36.2914 21.4099 35.825 21.8763 35.2497 21.8763H6.08305C5.50775 21.8763 5.04138 21.4099 5.04138 20.8346Z" fill="white"/>
				<path d="M37.3331 20.8346C37.3331 23.1358 35.4676 25.0013 33.1664 25.0013C30.8652 25.0013 28.9998 23.1358 28.9998 20.8346C28.9998 18.5334 30.8652 16.668 33.1664 16.668C35.4676 16.668 37.3331 18.5334 37.3331 20.8346Z" fill="#191820"/>
				<path fill-rule="evenodd" clip-rule="evenodd" d="M33.1664 22.918C34.317 22.918 35.2498 21.9852 35.2498 20.8346C35.2498 19.684 34.317 18.7513 33.1664 18.7513C32.0158 18.7513 31.0831 19.684 31.0831 20.8346C31.0831 21.9852 32.0158 22.918 33.1664 22.918ZM33.1664 25.0013C35.4676 25.0013 37.3331 23.1358 37.3331 20.8346C37.3331 18.5334 35.4676 16.668 33.1664 16.668C30.8652 16.668 28.9998 18.5334 28.9998 20.8346C28.9998 23.1358 30.8652 25.0013 33.1664 25.0013Z" fill="white"/>
				</g>
				<defs>
				<filter id="filter0_d_224_3143" x="0" y="0" width="41.3331" height="33" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
				<feFlood flood-opacity="0" result="BackgroundImageFix"/>
				<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
				<feOffset dy="4"/>
				<feGaussianBlur stdDeviation="2"/>
				<feComposite in2="hardAlpha" operator="out"/>
				<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/>
				<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_224_3143"/>
				<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_224_3143" result="shape"/>
				</filter>
				</defs>
				</svg>
				<span>HideFilters</span>
        	</div>
        <aside class="sidebar">
            <div class="category-title">Categories</div>
            <ul class="category-list">

            	<th:block th:each="vc : ${cCategory}">
            	<li>
            	<input type="checkbox" class="category-checkbox" th:value="${vc.categoryName}">
            	<a>[[${vc.categoryName}]]</a>
            	</li>
            	</th:block>
            </ul>
        </aside>
	</div>
        <main class="content">

<!--             <div class="search-bar"> -->
<!--                 <input type="text" placeholder="Search"> -->
<!--             </div> -->
			<div class="container">
				<section class="section">
	            <div class="template-grid" id="template-grid-wrap">
	                <div class="template-card" th:each="vl: ${cList}" th:if="${vl.menuNo == 1 || vl.menuNo == 5 || vl.menuNo == 2 || vl.menuNo == 4 || vl.menuNo == 6 || vl.menuNo == 7}">
						<input type="hidden" th:value=${vl.contentNo}>
						<input type="hidden" th:value=${vl.menuNo}>
						<div class="template-details">
							<div class="template-image"></div>
							<div class="overlay"></div>
							<div class="content_wrap">
								<span class="content_title_wrap">
									<div class="template-title">[[${vl.contentTitle}]]</div>
									<div class="template-writer">[[${vl.userNickName}]]</div>
								</span>
								<span class="icon_wrap">
									<span class="icon">
										<svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
										<path fill-rule="evenodd" clip-rule="evenodd" d="M7.9973 0C7.76163 0 7.53562 0.0894793 7.36897 0.248754C7.20233 0.408028 7.10871 0.62405 7.10871 0.849298V2.54789H1.77718C1.30584 2.54789 0.853809 2.72685 0.520523 3.0454C0.187238 3.36395 0 3.79599 0 4.24649V15.2874C0 15.7379 0.187238 16.1699 0.520523 16.4885C0.853809 16.807 1.30584 16.986 1.77718 16.986H14.2174C14.6888 16.986 15.1408 16.807 15.4741 16.4885C15.8074 16.1699 15.9946 15.7379 15.9946 15.2874V4.24649C15.9946 3.79599 15.8074 3.36395 15.4741 3.0454C15.1408 2.72685 14.6888 2.54789 14.2174 2.54789H8.88589V0.849298C8.88589 0.62405 8.79227 0.408028 8.62563 0.248754C8.45899 0.0894793 8.23297 0 7.9973 0ZM8.88589 2.54789V10.0455L10.5102 8.49298C10.6768 8.33362 10.9029 8.24404 11.1386 8.24396C11.3743 8.24388 11.6004 8.3333 11.7671 8.49255C11.9339 8.6518 12.0276 8.86784 12.0277 9.09313C12.0278 9.31843 11.9342 9.53452 11.7676 9.69389L8.78193 12.5467C8.57365 12.7456 8.29128 12.8573 7.99686 12.8573C7.70244 12.8573 7.42006 12.7456 7.21179 12.5467L4.22702 9.69389C4.14452 9.61498 4.07909 9.52131 4.03446 9.41823C3.98983 9.31516 3.96688 9.20469 3.96693 9.09313C3.96697 8.98158 3.99 8.87112 4.0347 8.76808C4.0794 8.66503 4.1449 8.57141 4.22746 8.49255C4.31002 8.4137 4.40802 8.35116 4.51587 8.30851C4.62371 8.26586 4.73929 8.24392 4.85601 8.24396C4.97272 8.244 5.08829 8.26601 5.1961 8.30874C5.30392 8.35147 5.40187 8.41407 5.48437 8.49298L7.10871 10.0455V2.54789H8.88589Z" fill="white"/>
										</svg>
										<span>[[${vl.downloadCount}]]</span>
									</span>
									<span class="icon" id="md-icon">
										<th:block th:if="${vl.likeTo == 1}">
										<svg width="16" height="14" viewBox="0 0 16 14" fill="none" xmlns="http://www.w3.org/2000/svg">
											<path d="M8.40374 1.14511C8.17373 1.34511 7.82073 1.34511 7.59173 1.14511C5.80971 -0.404898 3.16169 -0.462898 1.34268 1.47411C-2.64136 6.51912 3.14269 10.9711 6.95772 13.6691C7.2618 13.8844 7.62518 14 7.99773 14C8.37029 14 8.73366 13.8844 9.03774 13.6691C12.8808 10.9581 18.6378 6.51912 14.6528 1.47411C12.8348 -0.462898 10.1848 -0.404898 8.40274 1.14511" fill="red"/>
										</svg>
										</th:block>
										<th:block th:unless="${vl.likeTo == 1}">
										<svg width="16" height="14" viewBox="0 0 16 14" fill="none" xmlns="http://www.w3.org/2000/svg">
											<path d="M8.40374 1.14511C8.17373 1.34511 7.82073 1.34511 7.59173 1.14511C5.80971 -0.404898 3.16169 -0.462898 1.34268 1.47411C-2.64136 6.51912 3.14269 10.9711 6.95772 13.6691C7.2618 13.8844 7.62518 14 7.99773 14C8.37029 14 8.73366 13.8844 9.03774 13.6691C12.8808 10.9581 18.6378 6.51912 14.6528 1.47411C12.8348 -0.462898 10.1848 -0.404898 8.40274 1.14511" fill="white"/>
										</svg>
										</th:block>
										<span>[[${vl.likeCount}]]</span>
									</span>
								</span>
								</div>
							</div>
	                	</div>
	            	</div>
	            </section>
	            
				<div class="music-card" th:each="vl : ${cList}">
				  <th:block th:if="${vl.menuNo == 3}">
				    <div class="audio-card">
				      <div class="audio-left">
				        <button class="play-btn" th:attr="data-id=${vl.contentNo}">‚ñ∂</button>
				      </div>
				      <div class="audio-middle" th:attr="id='waveform-' + ${vl.contentNo}"></div>
				      <div class="audio-right">
				        <span class="duration">0:00</span>
				        <span class="icon download">üíæ</span>
				        <span class="icon heart">‚ù§Ô∏è</span>
				      </div>
				      <input type="hidden" th:value="${vl.contentNo}" />
				      <input type="hidden" th:value="${vl.menuNo}" />
				    </div>
				  </th:block>
				</div>
			</div>
        </main>
    </div>
    <script th:inline="javascript">
    const divs = document.querySelector('.template-grid');
    const loginUser = /*[[${session.loginUser}]]*/'loginUser';
    const waveMap = {};
	
	const menuNameURL = (window.location.pathname).split("/")[2];
    console.log(menuNameURL);
    
    const topList = document.getElementById('template-grid-wrap');
    
	window.onload=()=>{
		console.log("ÏãúÏûë");
		listPlay(topList);
//     	console.log(divs);
    	
    	const checkbox = document.querySelectorAll(".category-checkbox");
    	/*<![CDATA[*/
    	const content = /*[[${cList}]]*/1;
    	/*]]>*/
    	console.log(content);
    	
    	let lastSegment = window.location.pathname.split("/").pop();
    	let lastSegment2 = lastSegment.split("-").pop();
    	
    	console.log("lastSegment2 : " + lastSegment2);
		
    	if(lastSegment2 != "list"){
			[...checkbox].map((video, index, array) =>{
				video.checked = false;
				for(let i =0; i<content.length ; i++){
					if(content[i].categoryName == video.value){
						video.checked = true;
					}
				}
			})
    	}
    	
    	const categoryList = document.querySelector('.category-list');
//     	console.log(categoryList);
    	const checkboxArr = [];
    	[...categoryList.children].map((category, index, array) =>{
    		const checkbox = category.children[0];
    		checkbox.addEventListener('click', (event)=>{
    			
    			for(const c of categoryList.children){
    				if(c.children[0].checked){
    					checkboxArr.push(c.children[0].value);
    				}
    			}
    			let newUrl = null;
    			let checkboxValue = "";
    			
    			if(checkboxArr.length==0){
    				checkboxValue = "empty";
    				newUrl = `/board/${menuNameURL}`;
    			}else{
    				let str = checkboxArr.join("+");
					
					checkboxValue = str.replaceAll(" ", "-");
	    			newUrl = `/board/${menuNameURL}/${checkboxValue}`;
    			}
    			
    			checkboxArr.length = 0;
    		
				updatePage(checkboxValue, 1, null);
				
    		})
    	})
//     	//Í≤ÄÏÉâ
// 		const input = document.getElementsByTagName("input")[5];
//     	console.log(input);
// 		input.addEventListener('keyup', (event)=>{
// 			event.preventDefault();
// 			if(event.key == 'Enter'){
// 				const search = input.value;
				
// 				lastSegment = window.location.pathname.split("/").pop();
// 				lastSegment2 = lastSegment.split("-").pop();
				
// 				console.log("ÏóîÌÑ∞ ÎàÑÎ•¥Í≥† ÎÇòÏÑú : " + search);
// 				console.log("ÏóîÌÑ∞ ÎàÑÎ•¥Í≥† ÎÇòÏÑú : " + lastSegment2);
// 				updatePage(lastSegment2, 0 ,search);
// 			}
// 		});
    }
    
	window.addEventListener("popstate", (event) =>{
	    	if(event.state){
	    		console.log("Îí§Î°ú Í∞ÄÍ∏∞ Í∞êÏßÄ, Ïù¥Ï†Ñ ÏÉÅÌÉú:", event);
// 				console.log(event.state.data);
	    		
	    		let check = event.state.checkboxValue;
	    		console.log(check);
	    		
	    		updatePage(check, 0, null);
	    		
	    		checkboxValue = check.replaceAll("-", " ");
	    		
// 				console.log(checkboxValue);
				
				const cArr = checkboxValue.split("+");
				
				const checkbox = document.querySelectorAll(".category-checkbox");
				console.log(checkbox);
				
				[...checkbox].map((video, index, array) =>{
					video.checked = false;
					for(let i =0; i<cArr.length ; i++){
						if(cArr[i] == video.value){
							video.checked = true;
						}
					}
				})
	    	}
	    });
    
    function updatePage(checkboxValue, flag, search) {
    	console.log("updatePageÏóê Îì§Ïñ¥Ïò¥ : " + checkboxValue);
        // Ïó¨Í∏∞Ïóê Ïã§Ï†ú ÌéòÏù¥ÏßÄÎ•º Í∞±Ïã†ÌïòÎäî Î°úÏßÅÏùÑ ÏûëÏÑ± (AJAX ÏöîÏ≤≠ Í∞ÄÎä•)
        
        let url = "";
        
        if(search != null){
        	if(checkboxValue != "list"){
        		url = `/board/${menuNameURL}/${checkboxValue}/${search}`;
        	}else{
        		url = `/board/${menuNameURL}/${search}`;
        	}
        }else if(checkboxValue != "empty"){
        	url = `/board/${menuNameURL}/${checkboxValue}`;
        }else{
        	url = `/board/${menuNameURL}`;
        }
        console.log("Î≥ÄÍ≤Ω url : " +url);
        
        fetch(url, {
				method : 'post',
				headers : {'content-type' : 'application/json; charset=UTF-8'}
			})
			.then(response => response.json())
			.then(data =>{
				if(data.length == 0){
					divs.innerHTML = "Ìï¥Îãπ Í∏ÄÏù¥ ÏóÜÏäµÎãàÎã§";
				}else{
					divs.innerHTML = '';
			    	for(const i of data){
			    		console.log("Ïù¥Í±∞Î≥¥Îäî Ï§ë :" + i.menuNo);
						const div1 = document.createElement("div");
						div1.className = "template-card";
						
						const input1 = document.createElement("input");
						input1.type = "hidden";
						input1.value = i.contentNo;
						
						const input2 = document.createElement("input");
						input2.type = "hidden";
						input2.value = i.menuNo;
						
						const div2 = document.createElement('div');
						div2.className= "template-details";
						
						const divc1 = document.createElement('div');
						divc1.className = "template-image";
						
						const divc2 = document.createElement('div');
						divc2.className = "overlay";
						
						const divc3 = document.createElement('div');
						divc3.className = "content_wrap";
						
						const span1 = document.createElement('span');
						span1.className = "content_title_wrap";
						
						const divsc1= document.createElement('div');
						divsc1.className = "template-title";
						divsc1.innerHTML = i.contentTitle;
						
						const divsc2= document.createElement('div');
						divsc2.className = "template-writer";
						divsc2.innerHTML = i.userNickName;
						
						const span2 = document.createElement('span');
						span2.className = "icon_wrap";
						
						const spanc1 = document.createElement('span');
						spanc1.className = "icon";
						spanc1.innerHTML = `<svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
											<path fill-rule="evenodd" clip-rule="evenodd" d="M7.9973 0C7.76163 0 7.53562 0.0894793 7.36897 0.248754C7.20233 0.408028 7.10871 0.62405 7.10871 0.849298V2.54789H1.77718C1.30584 2.54789 0.853809 2.72685 0.520523 3.0454C0.187238 3.36395 0 3.79599 0 4.24649V15.2874C0 15.7379 0.187238 16.1699 0.520523 16.4885C0.853809 16.807 1.30584 16.986 1.77718 16.986H14.2174C14.6888 16.986 15.1408 16.807 15.4741 16.4885C15.8074 16.1699 15.9946 15.7379 15.9946 15.2874V4.24649C15.9946 3.79599 15.8074 3.36395 15.4741 3.0454C15.1408 2.72685 14.6888 2.54789 14.2174 2.54789H8.88589V0.849298C8.88589 0.62405 8.79227 0.408028 8.62563 0.248754C8.45899 0.0894793 8.23297 0 7.9973 0ZM8.88589 2.54789V10.0455L10.5102 8.49298C10.6768 8.33362 10.9029 8.24404 11.1386 8.24396C11.3743 8.24388 11.6004 8.3333 11.7671 8.49255C11.9339 8.6518 12.0276 8.86784 12.0277 9.09313C12.0278 9.31843 11.9342 9.53452 11.7676 9.69389L8.78193 12.5467C8.57365 12.7456 8.29128 12.8573 7.99686 12.8573C7.70244 12.8573 7.42006 12.7456 7.21179 12.5467L4.22702 9.69389C4.14452 9.61498 4.07909 9.52131 4.03446 9.41823C3.98983 9.31516 3.96688 9.20469 3.96693 9.09313C3.96697 8.98158 3.99 8.87112 4.0347 8.76808C4.0794 8.66503 4.1449 8.57141 4.22746 8.49255C4.31002 8.4137 4.40802 8.35116 4.51587 8.30851C4.62371 8.26586 4.73929 8.24392 4.85601 8.24396C4.97272 8.244 5.08829 8.26601 5.1961 8.30874C5.30392 8.35147 5.40187 8.41407 5.48437 8.49298L7.10871 10.0455V2.54789H8.88589Z" fill="white"/>
											</svg>
											<span>${i.downloadCount}</span>`;
						
						
						const spanc2 = document.createElement('span');
						spanc2.className = "icon";
						spanc2.id = "md-icon";
						
						let spanc2p = '';
						if(i.likeTo == 1){
							spanc2p = '<svg width="16" height="14" viewBox="0 0 16 14" fill="none" xmlns="http://www.w3.org/2000/svg">'
								 	  + '<path d="M8.40374 1.14511C8.17373 1.34511 7.82073 1.34511 7.59173 1.14511C5.80971 -0.404898 3.16169 -0.462898 1.34268 1.47411C-2.64136 6.51912 3.14269 10.9711 6.95772 13.6691C7.2618 13.8844 7.62518 14 7.99773 14C8.37029 14 8.73366 13.8844 9.03774 13.6691C12.8808 10.9581 18.6378 6.51912 14.6528 1.47411C12.8348 -0.462898 10.1848 -0.404898 8.40274 1.14511" fill="red"/>'
									  + '</svg>';
						}else{
							spanc2p = '<svg width="16" height="14" viewBox="0 0 16 14" fill="none" xmlns="http://www.w3.org/2000/svg">'
									  + '<path d="M8.40374 1.14511C8.17373 1.34511 7.82073 1.34511 7.59173 1.14511C5.80971 -0.404898 3.16169 -0.462898 1.34268 1.47411C-2.64136 6.51912 3.14269 10.9711 6.95772 13.6691C7.2618 13.8844 7.62518 14 7.99773 14C8.37029 14 8.73366 13.8844 9.03774 13.6691C12.8808 10.9581 18.6378 6.51912 14.6528 1.47411C12.8348 -0.462898 10.1848 -0.404898 8.40274 1.14511" fill="white"/>'
								      + '</svg>';
						}
						
						spanc2.innerHTML = spanc2p + `<span>${i.likeCount}</span>`;
						
						span2.appendChild(spanc1);
						span2.appendChild(spanc2);
						
						span1.appendChild(divsc1);
						span1.appendChild(divsc2);
						
						divc3.appendChild(span1);
						divc3.appendChild(span2);
						
						div2.appendChild(divc1);
						div2.appendChild(divc2);
						div2.appendChild(divc3);
						
						div1.appendChild(input1);
						div1.appendChild(input2);
						div1.appendChild(div2);
						
						divs.appendChild(div1);
						
						div1.addEventListener('click', function(){
							  const contentNo = div1.querySelector('input[type=hidden]').value;
							  console.log(contentNo);
							  location.href = "/board/" + menuNameURL + "/" + contentNo;
						});
						
						
					}
			    	const topList = document.getElementById('template-grid-wrap');
			    	console.log("topList" + topList);
			    	
			    	listPlay(topList);
				}
				
				if(flag == 1){
					window.history.pushState({ data, checkboxValue }, "", url);
				}

			})
    }
    
    
	function listPlay(list){
		[...list.children].map((template, index, array) =>{
		console.log(template);
		const thumbnail = template.children[2].children[0];
		const contentNo = template.children[0].value;
		const menuNo = template.children[1].value;
		
		//Ïç∏ÎÑ§Ïùº Î∂àÎü¨Ïò§Í∏∞
		fetch("/board/select-thumbnail/" + contentNo,{
			method : 'get',
			headers : {'content-type' : 'application/json; charset=UTF-8'}
		})
		.then(response => response.json())
		.then(data=>{
			console.log(data);
			if(menuNo == 1 || menuNo == 5){
				const video = document.createElement('video');
				video.muted = true;
				video.loop = true;

				const source = document.createElement("source");
				source.type = "video/mp4";
				source.src = data.thumbnail;

				video.appendChild(source);
				thumbnail.appendChild(video);

				template.addEventListener('mouseenter', function(){
					video.play();
				});

				template.addEventListener('mouseleave', function(){
					video.pause();
					video.currentTime = 0;
				});
			}else if(menuNo == 4 || menuNo == 6 || menuNo == 7 || menuNo == 2){
				const img = document.createElement('img');
				img.src = data.thumbnail;

				thumbnail.appendChild(img);
			}else{
				const img = document.createElement('img');
				img.src = "/img/sound-effects.png";
				
				thumbnail.appendChild(img);
			}

		})
		
		//Ïª®ÌÖêÏ∏† Ïù¥Îèô
		template.addEventListener('click', function(event){
			
			switch(menuNo){
			case "1": menuName = "video-templates"; break;
			case "2": menuName = "music"; break;
			case "3": menuName = "sound-effect"; break;
			case "4": menuName = "graphic-templates"; break;
			case "5": menuName = "stock-video"; break;
			case "6": menuName = "photo"; break;
			case "7": menuName = "font";
			}
			
//				console.log(menuName);
			
			location.href = "/board/" + menuName + "/" + contentNo;
		});
		
		const like = template.children[2].children[2].children[1].children[1].children[0];
		const view = (like.nextElementSibling);
		
		like.addEventListener('click', function(event){
			if(loginUser != null){
				if(this.children[0].getAttribute("fill") == 'white'){
					fetch('/board/like', {
						method : 'put',
						headers : {'content-type':'application/json; charset=UTF-8'},
						body: JSON.stringify({
							contentNo: contentNo
		    			})
					})
					.then(response => response.json())
					.then(data =>{
						this.children[0].setAttribute("fill", "red");
						view.innerText = Number((view.innerText)) + 1;
					})
				}else if(this.children[0].getAttribute("fill") == 'red'){
					fetch('/board/like', {
						method : 'delete',
						headers : {'content-type':'application/json; charset=UTF-8'},
						body: JSON.stringify({
							contentNo: contentNo
		    			})
					})
					.then(response => response.json())
					.then(data =>{
						this.children[0].setAttribute("fill", "white");
						view.innerText = Number((view.innerText)) - 1;
					})
				}
			}else{
				alert('Î°úÍ∑∏Ïù∏ ÌõÑ Ïù¥Ïö©Ìï¥Ï£ºÏÑ∏Ïöî');
			}
			event.stopPropagation();
		})
	})
}
    
    function formatTime(seconds) {
        const min = Math.floor(seconds / 60);
        const sec = Math.floor(seconds % 60);
        return `${min}:${sec.toString().padStart(2, '0')}`;
    }
	document.getElementById('CategoriesViewButton').addEventListener('click',(e)=>{
		const list = document.querySelector('.category-list');
		const title = document.querySelector('.category-title');
		const videogrid = document.querySelector('.video-grid');
		const sidebar = document.querySelector('.sidebar');
		const categoryWrap = document.querySelector('.categorywrap');
		console.log(categoryWrap);
// 		console.log(videogrid);
// 		console.log(list);
// 		console.log(title);
		list.classList.toggle('hidden');
		title.classList.toggle('hidden');
		sidebar.classList.toggle('hidden');
		categoryWrap.classList.toggle('flexdirection');
		
		
		if(e.target.closest('span').innerText == 'HideFilters'){
			e.target.closest('span').innerText = 'ViewFilters';
		}else if(e.target.closest('span').innerText == 'ViewFilters'){
			e.target.closest('span').innerText = 'HideFilters';
		}

	});

    
</script>
</body>
</html>