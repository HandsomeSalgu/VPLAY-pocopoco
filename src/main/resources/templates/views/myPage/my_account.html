<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
<link href="/css/topbar.css" rel="stylesheet" type="text/css">
<link href="/css/user/sidebar.css" rel="stylesheet" type="text/css">
<link href="/css/user/myPage.css" rel="stylesheet" type="text/css">
<title>My Account</title>
<style>
.section {
	width: 100%;
	margin-bottom: 3rem;
}

.form-group {
	margin-bottom: 1rem;
}

.form-label {
	display: block;
	color: #6f757d;
	margin-bottom: 0.5rem;
	font-size: 0.875rem;
}

.form-control {
	width: 100%;
	padding: 0.75rem;
	background-color: #252535;
	border: none;
	border-radius: 0.375rem;
	color: white;
	font-size: 0.875rem;
}

.form-control:focus {
	outline: none;
	box-shadow: 0 0 0 2px #5e37e9;
}

textarea.form-control {
	min-height: 100px;
	resize: none;
}

.input-field {
	flex-grow: 1;
	padding: 0.8rem;
	background-color: #1f1f2c;
	border: 1px solid #28303f;
	border-radius: 4px;
	color: #ffffff;
}

.input-field::placeholder {
	color: #949396;
}

.radio-group {
	display: flex;
	gap: 0.5rem;
}

.radio-group span {
	font-size: 0.9rem;
}

.radio-input {
	accent-color: #5e37e9;
}

.btn {
	display: block;
	width: 100%;
	padding: 0.75rem;
	background-color: #5e37e9;
	color: white;
	border: none;
	border-radius: 0.375rem;
	font-size: 0.875rem;
	font-weight: 500;
	cursor: pointer;
	margin-top: 1.5rem;
}

.btn:hover {
	background-color: #8137e9;
}

.button {
	background-color: #5e37e9;
	color: #ffffff;
	border: none;
	border-radius: 4px;
	padding: 0.8rem 1rem;
	cursor: pointer;
	font-size: 0.9rem;
	white-space: nowrap;
	margin-left: 0.5rem;
	height: 100%;
}

.verify-button {
	width: 100px;
}

.verification-section {
	display: none;
}

.verification-section.active {
	display: block;
}
</style>
</head>
<body>
	<div th:replace="~{views/common/topbar :: topbar}"></div>
	<div class="main-content">
		<div th:replace="~{views/myPage/my_sidebar}"></div>
		<!-- Personal Information -->
		<div class="content_wrap flex_custom_wrap">
			<div class="content-header">
				<h1>My Account</h1>
			</div>
			<section class="section">
				<form action="users/updateInfo" method="post">
					<div class="form-group">
						<label class="form-label" for="id">아이디</label>
						<input type="text" id="id" class="form-control" th:value="${session.loginUser.userId}" readonly>
					</div>

					<div class="form-group">
						<label class="form-label" for="name">이름</label>
						<input type="text" id="name" class="form-control" th:value="${session.loginUser.userName}">
					</div>

					<div class="form-group">
						<label class="form-label" for="nickname">닉네임</label>
						<input type="text" id="nickname" class="form-control" th:value="${session.loginUser.userNickname}">
					</div>

					<div class="form-group">
						<label class="form-label" for="phone">전화번호</label>
						<input type="tel" id="tel" class="form-control" th:value="${session.loginUser.userPhone}">
					</div>
					
					<div class="form-group">
						<label class="form-label" for="phone">이메일</label>
						<input type="email" placeholder="Email" class="input-field" name="userEmail" id="email">
						<button type="button" class="button verify-button" onclick="showVerification()" id="emailBtn">인증하기</button>
					</div>
					<div class="verification-section" id="verificationSection">
						<div class="form-group">
							<input type="text" placeholder="인증번호 입력" class="input-field" name="confirmVerifi" id="confirmVerifi">
							<button type="button" class="button verify-button" id="confirmEmailBtn">확인</button>
						</div>
					</div>	
					
					<div class="form-group">
						<label class="form-label" for="birthdate">생년월일</label> <input type="date" id="birthdate" class="form-control" th:value="${session.loginUser.userBirth}">
					</div>
					
					<div class="form-group">
					    <label class="form-label">성별</label>
					    <div class="radio-group">
					        <input type="radio" name="userGender" value="M" class="radio-input" id="male" th:checked="${session.loginUser.userGender == 'M'}">
					        <span>남자</span>
					        <input type="radio" name="userGender" value="F" class="radio-input" id="female" th:checked="${session.loginUser.userGender == 'F'}">
					        <span>여자</span>
					    </div>
					</div>

					<div class="form-group">
						<label class="form-label" for="description">한마디</label>
						<textarea id="description" class="form-control">[[${session.loginUser.userComment}]]</textarea>
					</div>

					<div class="form-group">
						<label class="form-label" for="password">비밀번호</label> <input type="password" id="password" class="form-control" placeholder="비밀번호를 입력하세요.">
					</div>

					<button type="submit" class="btn">Update</button>
				</form>
			</section>

			<!-- Change Password -->
			<div class="content-header">
				<h1>Change password</h1>
			</div>
			<section class="section">
				<form action="users/changePw" method="post">
					<div class="form-group">
						<label class="form-label" for="current-password">현재 비밀번호</label> <input type="password" id="current-password" class="form-control" placeholder="현재 비밀번호를 입력하세요.">
					</div>

					<div class="form-group">
						<label class="form-label" for="new-password">새 비밀번호</label> <input type="password" id="new-password" class="form-control" placeholder="새로운 비밀번호를 입력하세요.">
					</div>

					<div class="form-group">
						<label class="form-label" for="confirm-password">새 비밀번호 확인</label> <input type="password" id="confirm-password" class="form-control" placeholder="새로운 비밀번호를 확인 다시 입력하세요.">
					</div>

					<button type="submit" class="btn">Change Password</button>
				</form>
			</section>
		</div>
	</div>
</body>
</html>